{"version":3,"sources":["components/Person.js","components/Filter.js","components/PersonForm.js","components/Persons.js","services/pbservices.js","components/Notification.js","components/Error.js","App.js","index.js"],"names":["Person","_ref","person","handleRemoval","react_default","a","createElement","name","number","onClick","Filter","persons","searchFilter","handleChange","value","onChange","PersonForm","addPerson","newName","newNumber","handleNameChange","handleNumberChange","onSubmit","type","Persons","rows","baseUrl","pbservices","newObject","axios","post","then","response","data","id","put","concat","delete","Infobox","message","className","Errorbox","App","_useState","useState","_useState2","Object","slicedToArray","setPersons","_useState3","_useState4","setNewName","_useState5","_useState6","setNewNumber","_useState7","_useState8","showAll","setShowAll","_useState9","_useState10","setSearchFilter","_useState11","_useState12","information","setInformation","_useState13","_useState14","errorMessage","setErrorMessage","useEffect","console","log","get","setTimeout","namesToshow","filter","toLocaleLowerCase","includes","Notification","Error","components_Filter","event","target","components_PersonForm","preventDefault","newPersonObj","some","foundPerson","find","window","confirm","persontoChange","p","changedPerson","objectSpread","map","catch","error","updateContact","components_Persons","components_Person","key","personID","n","handleremovalOf","ReactDOM","render","src_App","document","getElementById"],"mappings":"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","file":"static/js/main.45d407e8.chunk.js","sourcesContent":["import React from 'react'\r\n\r\nconst Person = ({person, handleRemoval}) => {\r\n    return (\r\n        <div>{person.name} {person.number} <button onClick={handleRemoval}>delete</button></div>\r\n    )\r\n}\r\n\r\nexport default Person","import React from 'react'\r\n\r\nconst Filter = ({ persons, searchFilter, handleChange }) => {\r\n    return (\r\n        <div>\r\n            filter shown with <input value={searchFilter} onChange={handleChange} />\r\n        </div>\r\n    )\r\n}\r\nexport default Filter","import React from 'react'\r\n\r\nconst PersonForm = ({ addPerson, newName, newNumber, handleNameChange, handleNumberChange }) => {\r\n    return (\r\n        <form onSubmit={addPerson}>\r\n        <div>\r\n          name: <input value={newName}\r\n            onChange={handleNameChange} />\r\n        </div>\r\n        <div>\r\n          number: <input value={newNumber}\r\n            onChange={handleNumberChange} />\r\n        </div>\r\n        <div>\r\n          <button type=\"submit\">add</button>\r\n        </div>\r\n      </form>\r\n    )\r\n}\r\n\r\nexport default PersonForm","import React from 'react'\r\n\r\nconst Persons = ({rows}) => {\r\n    return (\r\n        <div>\r\n        {rows()}\r\n      </div>\r\n    )\r\n}\r\n\r\n\r\nexport default Persons","import axios from 'axios'\r\nconst baseUrl = '/api/persons'\r\n\r\nconst getAll = () => {\r\n  const request = axios.get(baseUrl)\r\n  return request\r\n}\r\n\r\nconst create = newObject => {\r\n  const request = axios.post(baseUrl, newObject)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nconst update = (id, newObject) => {\r\n  const request = axios.put(`${baseUrl}/${id}`, newObject)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nconst deleteContact = (id) => {\r\n  const request = axios.delete(`${baseUrl}/${id}`)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nexport default { getAll, create, update, deleteContact }","import React from 'react'\r\n\r\nconst Infobox = ({ message }) => {\r\n    if (message === null) {\r\n      return null\r\n    }\r\n  \r\n    return (\r\n      <div className=\"success\">\r\n        {message}\r\n      </div>\r\n    )\r\n  }\r\n\r\n  export default Infobox","import React from 'react'\r\n\r\nconst Errorbox = ({ message }) => {\r\n    if (message === null) {\r\n      return null\r\n    }\r\n  \r\n    return (\r\n      <div className=\"error\">\r\n        {message}\r\n      </div>\r\n    )\r\n  }\r\n\r\n  export default Errorbox","import React, { useState, useEffect } from 'react'\nimport Person from './components/Person'\nimport Filter from './components/Filter'\nimport PersonForm from './components/PersonForm';\nimport Persons from './components/Persons';\nimport axios from 'axios'\nimport pbservices from './services/pbservices'\nimport Infobox from './components/Notification'\nimport ErrorBox from './components/Error'\n\nconst App = () => {\n  const [persons, setPersons] = useState([])\n  const [newName, setNewName] = useState('')\n  const [newNumber, setNewNumber] = useState('')\n  const [showAll, setShowAll] = useState(true)\n  const [searchFilter, setSearchFilter] = useState('')\n  const [information, setInformation] = useState(null)\n  const [errorMessage, setErrorMessage] = useState(null)\n\n  useEffect(() => {\n    console.log('effect')\n    axios\n      .get('/api/persons')\n      .then(response => {\n        console.log('promise fulfilled')\n        setPersons(response.data)\n        setInformation(`Contacts  succesfully loaded`)\n        setTimeout(() => { setInformation(null) }, 5000)\n      })\n  }, [])\n\n  const namesToshow = showAll\n    ? persons\n    : persons.filter(person => { return person.name.toLocaleLowerCase().includes(`${searchFilter}`.toLocaleLowerCase()) }\n    )\n\n  const handleremovalOf = personID => {\n    const target = persons.find(n => n.id === personID)\n    const result = window.confirm(`Are you sure you want to remove ${target.name} from contacts?`)\n    if (result) {\n      pbservices.deleteContact(personID)\n      setPersons(persons.filter(p => p.id !== personID))\n      setInformation(`${target.name} removed from contacts`)\n      setTimeout(() => { setInformation(null) }, 5000)\n      setNewName('')\n      setNewNumber('')\n    }\n  }\n\n\n  const rows = () =>\n    namesToshow.map(person =>\n      <Person\n        key={person.id}\n        person={person}\n        handleRemoval={() => handleremovalOf(person.id)}\n      />)\n\n  const updateContact = (id) => {\n    const persontoChange = persons.find(p => p.id === id)\n    const changedPerson = { ...persontoChange, number: newNumber }\n    console.log(changedPerson)\n    pbservices.update(id, changedPerson).then(response => {\n      console.log(response.data)\n      setPersons(persons.map(person => person.id !== id ? person : changedPerson))\n      setInformation(`${changedPerson.name} number changed`)\n      setTimeout(() => { setInformation(null) }, 5000)\n    })\n      .catch(error => {\n        setErrorMessage(`Information of ${changedPerson.name} has already been removed from the server`)\n        setTimeout(() => { setErrorMessage(null) }, 5000);\n      })\n    }\n\n  const addPerson = (event) => {\n      event.preventDefault()\n      const newPersonObj = {\n        name: newName,\n        number: newNumber,\n      }\n\n      let alreadyIn = persons.some(person => person.name === `${newName}`)\n      if (alreadyIn) {\n        const foundPerson = persons.find(person => person.name === newName)\n        console.log(foundPerson)\n        const result = window.confirm(`${newName} is already added to phonebook. Replace the old number with a new one?`)\n        if (result) {\n          updateContact(foundPerson.id)\n        }\n      } else {\n        pbservices.create(newPersonObj)\n          .then(data => {\n            setPersons(persons.concat(data))\n            setInformation(`Added ${newName} to contacts`)\n            setTimeout(() => { setInformation(null) }, 5000)\n          })\n          .catch(error => {\n            setErrorMessage(error.response.data.error)\n            setTimeout(() => { setErrorMessage(null) }, 5000)\n          })\n        setNewName('')\n        setNewNumber('')\n      }\n    }\n\n    const handleNameChange = (event) => {\n      console.log(event.target.value)\n      setNewName(event.target.value)\n    }\n\n    const handleNumberChange = (event) => {\n      console.log(event.target.value)\n      setNewNumber(event.target.value)\n    }\n\n    const handleChange = (event) => {\n      setSearchFilter(event.target.value)\n      if (event.target.value !== '') {\n        setShowAll(false)\n        console.log(false)\n      } else {\n        setShowAll(true)\n        console.log(true)\n\n      }\n      console.log(`${searchFilter}`)\n    }\n\n    return (\n      <div>\n        <h2>Phonebook</h2>\n\n        <Infobox message={information} />\n        <ErrorBox message={errorMessage} />\n        <Filter persons={persons} searchFilter={searchFilter} handleChange={handleChange} />\n        <h2>Add new contact</h2>\n        <PersonForm addPerson={addPerson} handleNameChange={handleNameChange} handleNumberChange={handleNumberChange} />\n        <h2>Numbers</h2>\n        <Persons rows={rows} />\n      </div>\n    )\n\n  }\n\n  export default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport './index.css'\n\nReactDOM.render(<App/>, document.getElementById('root'));\n\n"],"sourceRoot":""}